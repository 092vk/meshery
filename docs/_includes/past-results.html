



{% assign sorted_tests_istio = site.compatibility | sort: "timestamp" | reverse | where: "meshery-component",{{page.service-mesh}} %}
<style>

table.tablesorter th.tablesorter-headerUnSorted {
    background-image: url('http://tablesorter.com/themes/blue/bg.gif');
    background-repeat: no-repeat;
    background-position: center right;
    cursor: pointer;
}

table.tablesorter th.tablesorter-headerAsc {
    background-image:url("data:image/gif;base64, R0lGODlhFQAJAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAkAAAIXjI+AywnaYnhUMoqt3gZXPmVg94yJVQAAOw==") no-repeat 99%;
    background-repeat: no-repeat;
    background-position: center right;
}
table.tablesorter th.tablesorter-headerDesc {
    background-image: url("data:image/gif;base64, R0lGODlhFQAEAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAQAAAINjI8Bya2wnINUMopZAQA7")no-repeat 99%;
    background-repeat: no-repeat;
    background-position: center right;
}
table.tablesorter th.headerSortDown,
table.tablesorter th.headerSortUp {
background-color: #8dbdd8;
}
</style>

<table id = "test-table" class="tablesorter">
    <thead>
        <th>Status </th>
        <th>Meshery Component</th>
        <th>Meshery Component Version</th>
        <th style="text-align: center;" >Meshery Server Version</th>
        <th>Service Mesh</th>
        <th>Service Mesh Version</th>
    </thead>
    <tbody>
    {% for item in sorted_tests_istio  %}
        {% if item.overall-status == "passing" %}
            {% assign overall-status = "background-color: #56b257; color: white;" %}
            {% assign result-state = "/assets/img/passing.svg"></tbody>" %}
        {% elsif item.overall-status == "partial" %}
            {% assign overall-status = "background-color: #EBC017; color: white;" %}
            {% assign result-state = "/assets/img/YellowCheck.svg" %}
        {% elsif item.overall-status == "failing" %}
            {% assign overall-status = "background-color: #B32700; color: white;" %}
            {% assign result-state = "/assets/img/failing.svg" %}
        {% else %}
            {% assign overall-status = "" %}
        {% endif %}
        {% if item.meshery-component-version == "edge" %}
            <tr style= "visibility: hidden; display: none;" class="test-details edge edge_visible" onclick="toggle_visibility('{{forloop.index}}');">
        {% else %}
            <tr style= "visibility: hidden; display: none;" class="test-details stable stable_visible" onclick="toggle_visibility('{{forloop.index}}');">
        {% endif %}    
            <td style="{{overall-status}}" >{{ item.timestamp }}</td>
            <td><a href="{{ site.repo }}-{{ item.service-mesh }}">{{ item.meshery-component }}</a></td>
            {% if item.meshery-component-version == "edge" %}
                <td><a href="{{ site.repo }}-{{ item.service-mesh }}/releases">{{ item.meshery-component-version }}</a></td>
            {% else %}
                <td><a href="{{ site.repo }}-{{ item.service-mesh }}/releases/tag/{{ item.meshery-component-version }}">{{ item.meshery-component-version }}</a></td>
            {% endif %}
            {% if item.meshery-server-version == "edge" %}
                <td><a href="{{ site.repo }}/releases{{ item.meshery-server-version }}">{{ item.meshery-server-version }}</a></td>
            {% else %}
                <td><a href="{{ site.repo }}/releases/tag/{{ item.meshery-server-version }}">{{ item.meshery-server-version }}</a></td>
            {% endif %}
            <td><img style="height: 1rem; vertical-align: text-bottom;" src="{{site.baseurl}}/assets/img/service-meshes/{{item.service-mesh | downcase }}.svg" />&nbsp;<a href="{{ site.baseurl }}/service-meshes/adapters/{{ item.service-mesh }}">{{ item.service-mesh }}</a></td>
            <td>{{ item.service-mesh-version }}</td>
        </tr>   
        <tr id="{{forloop.index}}" style="visibility:hidden; display:none;">
            <td colspan="2" class="details">
                <i>Platform:</i>
                <li><img style="height: 1rem; vertical-align: text-bottom;" src="{{site.baseurl}}/assets/img/kubernetes-icon-color.svg" />  {{item.k8s-distro}}  {{item.k8s-version}}</li>
            </td>
            <td colspan="4" class="details">
                <i>Test results:</i>
                <table style="border:0">
                {% for test in item.tests %}
                   <tr><td><img style="height:24px; width: 24px" src={{result-state}}></td><td>{{test[0]}}</td></tr>
                {% endfor %}      
                </table>      
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<script type="text/javascript" >
    $(function($) {
            console.log("sorting table");
            $("#test-table").tablesorter();
    });
</script>

<!-- <script>
    let table = document.getElementById("test-table")
    rows = table.rows;
    let sortArrow = document.querySelectorAll(".sort-arrow")
    console.log("asdfasf",sortArrow)
    
function reverse(){
	for (var i = 1; i <rows.length; i++) {
    rows[i].parentNode.insertBefore(rows[rows.length-1], rows[i]);
	}
    for(let j = 0;j<sortArrow.length;j++){
        if(sortArrow[j].innerHTML == "ↆ")
        sortArrow[j].innerHTML = "↑"
       else
       sortArrow[j].innerHTML = "ↆ"
    }
   
}
</script> -->